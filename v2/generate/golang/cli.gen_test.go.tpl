// Code generated by {{.Generator}}, DO NOT EDIT.
package {{.Package}}

import (
	"github.com/stretchr/testify/assert"
	"testing"
)

type CLIHandlerMock struct {
	GotInput any
}

var _ CLIHandler = (*CLIHandlerMock)(nil)

{{ range $Index, $Command := .CommandList -}}
func (m *CLIHandlerMock) {{$Command.HandlerMethodName}}(input {{$Command.HandlerInputType}}) error {
	m.GotInput = input
	return nil
}
{{end -}}

func TestRun(t *testing.T) {
	testcases := []struct {
		name string
		args []string
		wantInput any
	}{
	{{- range $Index, $Command := .CommandList }}
		{
			name: {{$Command.PathLiteral}} + " command-line-arguments",
			args: []string{
				"", {{range $Command.Path }}"{{.}}", {{end}}
		{{- range $Index, $Option := $Command.Options }}
				"{{$Option.Option}}=0",
		{{- end }}
				"--",
		{{- range $Index, $Argument := $Command.Arguments }}
				"0",
		{{- end }}
			},
			wantInput: {{$Command.HandlerInputType}}{
		{{- range $Index, $Option := $Command.Options }}
				{{$Option.InputFieldName}}: {{if eq $Option.Type "integer" -}}{{if $Option.Repeated}}[]int64{0}{{else}}0{{end}}
				{{- else if eq $Option.Type "boolean"}}{{if $Option.Repeated -}}[]bool{false}{{else}}false{{end}}
				{{- else}}{{if $Option.Repeated}}[]string{"0"}{{else}}"0"{{end}}
				{{- end}},
		{{- end }}
		{{- range $Index, $Argument := $Command.Arguments }}
				{{$Argument.InputFieldName}}: {{if eq $Argument.Type "integer" -}}{{if $Argument.Variadic}}[]int64{0}{{else}}0{{end}}
				{{- else if eq $Argument.Type "boolean"}}{{if $Argument.Variadic -}}[]bool{false}{{else}}false{{end}}
				{{- else}}{{if $Argument.Variadic}}[]string{"0"}{{else}}"0"{{end}}
				{{- end}},
		{{- end }}
				Subcommand: []string{ {{range $Command.Path }}"{{.}}", {{end}} },
				Options: []string{
		{{- range $Index, $Option := $Command.Options }}
					"{{$Option.Option}}=0",
		{{- end }}
				},
				Arguments: []string{
		{{- range $Index, $Argument := $Command.Arguments }}
					"0",
		{{- end }}
				},
			},
		},
		{
			name: {{$Command.PathLiteral}} + " default-options",
			args: []string{
				"", {{range $Command.Path }}"{{.}}", {{end}}
				"--",
		{{- range $Index, $Argument := $Command.Arguments }}
				"0",
		{{- end }}
			},
			wantInput: {{$Command.HandlerInputType}}{
		{{- range $Index, $Option := $Command.Options }}
				{{$Option.InputFieldName}}: {{$Option.InputFieldInit}},
		{{- end }}
		{{- range $Index, $Argument := $Command.Arguments }}
				{{$Argument.InputFieldName}}: {{if eq $Argument.Type "integer" -}}{{if $Argument.Variadic}}[]int64{0}{{else}}0{{end}}
				{{- else if eq $Argument.Type "boolean"}}{{if $Argument.Variadic -}}[]bool{false}{{else}}false{{end}}
				{{- else}}{{if $Argument.Variadic}}[]string{"0"}{{else}}"0"{{end}}
				{{- end}},
		{{- end }}
				Subcommand: []string{ {{range $Command.Path }}"{{.}}", {{end}} },
				Options: []string{},
				Arguments: []string{
		{{- range $Index, $Argument := $Command.Arguments }}
					"0",
		{{- end }}
				},
			},
		},
		{
			name: {{$Command.PathLiteral}} + " short-options",
			args: []string{
				"", {{range $Command.Path }}"{{.}}", {{end}}
		{{- range $Index, $Option := $Command.Options }}
				"{{if $Option.ShortOption}}{{$Option.ShortOption}}{{else}}{{$Option.Option}}{{end}}=0",
		{{- end }}
				"--",
		{{- range $Index, $Argument := $Command.Arguments }}
				"0",
		{{- end }}
			},
			wantInput: {{$Command.HandlerInputType}}{
		{{- range $Index, $Option := $Command.Options }}
				{{$Option.InputFieldName}}: {{if eq $Option.Type "integer" -}}{{if $Option.Repeated}}[]int64{0}{{else}}0{{end}}
				{{- else if eq $Option.Type "boolean"}}{{if $Option.Repeated -}}[]bool{false}{{else}}false{{end}}
				{{- else}}{{if $Option.Repeated}}[]string{"0"}{{else}}"0"{{end}}
				{{- end}},
		{{- end }}
		{{- range $Index, $Argument := $Command.Arguments }}
				{{$Argument.InputFieldName}}: {{if eq $Argument.Type "integer" -}}{{if $Argument.Variadic}}[]int64{0}{{else}}0{{end}}
				{{- else if eq $Argument.Type "boolean"}}{{if $Argument.Variadic -}}[]bool{false}{{else}}false{{end}}
				{{- else}}{{if $Argument.Variadic}}[]string{"0"}{{else}}"0"{{end}}
				{{- end}},
		{{- end }}
				Subcommand: []string{ {{range $Command.Path }}"{{.}}", {{end}} },
				Options: []string{
		{{- range $Index, $Option := $Command.Options }}
					"{{if $Option.ShortOption}}{{$Option.ShortOption}}{{else}}{{$Option.Option}}{{end}}=0",
		{{- end }}
				},
				Arguments: []string{
		{{- range $Index, $Argument := $Command.Arguments }}
					"0",
		{{- end }}
				},
			},
		},
		{
			name: {{$Command.PathLiteral}} + " negated-options",
			args: []string{
				"", {{range $Command.Path }}"{{.}}", {{end}}
		{{- range $Index, $Option := $Command.Options }}
				"{{if $Option.Negation}}-no{{$Option.Option}}=1{{else}}{{$Option.Option}}=0{{end}}",
		{{- end }}
				"--",
		{{- range $Index, $Argument := $Command.Arguments }}
				"0",
		{{- end }}
			},
			wantInput: {{$Command.HandlerInputType}}{
		{{- range $Index, $Option := $Command.Options }}
				{{$Option.InputFieldName}}: {{if eq $Option.Type "integer" -}}{{if $Option.Repeated}}[]int64{0}{{else}}0{{end}}
				{{- else if eq $Option.Type "boolean"}}{{if $Option.Repeated -}}[]bool{false}{{else}}false{{end}}
				{{- else}}{{if $Option.Repeated}}[]string{"0"}{{else}}"0"{{end}}
				{{- end}},
		{{- end }}
		{{- range $Index, $Argument := $Command.Arguments }}
				{{$Argument.InputFieldName}}: {{if eq $Argument.Type "integer" -}}{{if $Argument.Variadic}}[]int64{0}{{else}}0{{end}}
				{{- else if eq $Argument.Type "boolean"}}{{if $Argument.Variadic -}}[]bool{false}{{else}}false{{end}}
				{{- else}}{{if $Argument.Variadic}}[]string{"0"}{{else}}"0"{{end}}
				{{- end}},
		{{- end }}
				Subcommand: []string{ {{range $Command.Path }}"{{.}}", {{end}} },
				Options: []string{
		{{- range $Index, $Option := $Command.Options }}
				"{{if $Option.Negation}}-no{{$Option.Option}}=1{{else}}{{$Option.Option}}=0{{end}}",
		{{- end }}
				},
				Arguments: []string{
		{{- range $Index, $Argument := $Command.Arguments }}
					"0",
		{{- end }}
				},
			},
		},
		{
			name: {{$Command.PathLiteral}} + " variadic-arguments-zero",
			args: []string{
				"", {{range $Command.Path }}"{{.}}", {{end}}
		{{- range $Index, $Option := $Command.Options }}
				"{{if $Option.Negation}}-no{{$Option.Option}}=1{{else}}{{$Option.Option}}=0{{end}}",
		{{- end }}
				"--",
		{{- range $Index, $Argument := $Command.Arguments }}
				{{if not $Argument.Variadic}}"0",{{end}}
		{{- end }}
			},
			wantInput: {{$Command.HandlerInputType}}{
		{{- range $Index, $Option := $Command.Options }}
				{{$Option.InputFieldName}}: {{if eq $Option.Type "integer" -}}{{if $Option.Repeated}}[]int64{0}{{else}}0{{end}}
				{{- else if eq $Option.Type "boolean"}}{{if $Option.Repeated -}}[]bool{false}{{else}}false{{end}}
				{{- else}}{{if $Option.Repeated}}[]string{"0"}{{else}}"0"{{end}}
				{{- end}},
		{{- end }}
		{{- range $Index, $Argument := $Command.Arguments }}
				{{$Argument.InputFieldName}}: {{if eq $Argument.Type "integer" -}}{{if $Argument.Variadic}}[]int64{}{{else}}0{{end}}
				{{- else if eq $Argument.Type "boolean"}}{{if $Argument.Variadic -}}[]bool{}{{else}}false{{end}}
				{{- else}}{{if $Argument.Variadic}}[]string{}{{else}}"0"{{end}}
				{{- end}},
		{{- end }}
				Subcommand: []string{ {{range $Command.Path }}"{{.}}", {{end}} },
				Options: []string{
		{{- range $Index, $Option := $Command.Options }}
					"{{if $Option.Negation}}-no{{$Option.Option}}=1{{else}}{{$Option.Option}}=0{{end}}",
		{{- end }}
				},
				Arguments: []string{
		{{- range $Index, $Argument := $Command.Arguments }}
					{{if not $Argument.Variadic}}"0",{{end}}
		{{- end }}
				},
			},
		},
		{
			name: {{$Command.PathLiteral}} + " variadic-arguments-two",
			args: []string{
				"", {{range $Command.Path }}"{{.}}", {{end}}
		{{- range $Index, $Option := $Command.Options }}
				"{{if $Option.Negation}}-no{{$Option.Option}}=1{{else}}{{$Option.Option}}=0{{end}}",
		{{- end }}
				"--",
		{{- range $Index, $Argument := $Command.Arguments }}
				"0"{{if $Argument.Variadic}}, "0"{{end}},
		{{- end }}
			},
			wantInput: {{$Command.HandlerInputType}}{
		{{- range $Index, $Option := $Command.Options }}
				{{$Option.InputFieldName}}: {{if eq $Option.Type "integer" -}}{{if $Option.Repeated}}[]int64{0}{{else}}0{{end}}
				{{- else if eq $Option.Type "boolean"}}{{if $Option.Repeated -}}[]bool{false}{{else}}false{{end}}
				{{- else}}{{if $Option.Repeated}}[]string{"0"}{{else}}"0"{{end}}
				{{- end}},
		{{- end }}
		{{- range $Index, $Argument := $Command.Arguments }}
				{{$Argument.InputFieldName}}: {{if eq $Argument.Type "integer" -}}{{if $Argument.Variadic}}[]int64{0, 0}{{else}}0{{end}}
				{{- else if eq $Argument.Type "boolean"}}{{if $Argument.Variadic -}}[]bool{false, false}{{else}}false{{end}}
				{{- else}}{{if $Argument.Variadic}}[]string{"0", "0"}{{else}}"0"{{end}}
				{{- end}},
		{{- end }}
				Subcommand: []string{ {{range $Command.Path }}"{{.}}", {{end}} },
				Options: []string{
		{{- range $Index, $Option := $Command.Options }}
					"{{if $Option.Negation}}-no{{$Option.Option}}=1{{else}}{{$Option.Option}}=0{{end}}",
		{{- end }}
				},
				Arguments: []string{
		{{- range $Index, $Argument := $Command.Arguments }}
					"0"{{if $Argument.Variadic}}, "0"{{end}},
		{{- end }}
				},
			},
		},
	{{- end }}
	}

	for _, tc := range testcases {
		t.Run(tc.name, func(t *testing.T) {
			mock := &CLIHandlerMock{}
			err := Run(mock, tc.args)
			if err != nil {
				t.Errorf("unexpected error: %v", err)
			}
			assert.Equal(t, tc.wantInput, mock.GotInput, "unexpected input for args: %v", tc.args)
		})
	}
}
